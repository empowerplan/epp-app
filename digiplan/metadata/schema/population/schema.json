{
  "$id": "https://raw.githubusercontent.com/rl-institut/digiplan/main/digiplan/metadata/schema/v1-0-0",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "description": "JSON schema of a population forecast of a certain ABW municipality",
  "properties": {
    "language": {
      "description": "The used language in the JSON response values. Follows ISO 639-1. Example: en, de, fr, ...",
      "maxLength": 2,
      "minLength": 2,
      "title": "Language",
      "type": "string"
    },
    "lookup": {
      "description": "Lookup name used in the request as parameter. Example: ?lookup=population&municipality=12",
      "title": "Lookup Name",
      "type": "string"
    },
    "name": {
      "description": "Human-readable name of the JSON response",
      "title": "Human-Readable Name",
      "type": "string"
    },
    "payload": {
      "description": "A list of one or more municipality objects",
      "items": {
        "additionalProperties": false,
        "description": "Municipality object which contains a population time series list",
        "properties": {
          "description": {
            "description": "User facing short description for informational purposes",
            "maxLength": 280,
            "minLength": 0,
            "title": "Description",
            "type": "string"
          },
          "id": {
            "description": "Unique ID of the municipality",
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "description": "Name of the municipality",
            "title": "Name",
            "type": "string"
          },
          "series": {
            "additionalProperties": false,
            "description": "Population time series object of one municipality with key value definition and items list",
            "properties": {
              "definition": {
                "additionalProperties": false,
                "description": "Key-value definition for lookup and human-readable names",
                "properties": {
                  "key": {
                    "additionalProperties": false,
                    "description": "Key lookup and name definition",
                    "properties": {
                      "lookup": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "lookup",
                      "name"
                    ],
                    "title": "Key Definition",
                    "type": "object"
                  },
                  "value": {
                    "additionalProperties": false,
                    "description": "Value lookup and name definition",
                    "properties": {
                      "lookup": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "lookup",
                      "name"
                    ],
                    "title": "Value Definition",
                    "type": "object"
                  }
                },
                "required": [
                  "key",
                  "value"
                ],
                "title": "Key-Value Definition",
                "type": "object"
              },
              "items": {
                "description": "Population list by year and number of inhabitants",
                "items": {
                  "inhabitants": {
                    "description": "The number of inhabitants",
                    "title": "Inhabitants",
                    "type": "integer"
                  },
                  "year": {
                    "description": "The year of a municipality's population",
                    "title": "Year",
                    "type": "integer"
                  }
                },
                "title": "Population by Year",
                "type": "array"
              }
            },
            "required": [
              "definition",
              "items"
            ],
            "title": "Population Time Series",
            "type": "object"
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "series"
        ],
        "title": "Municipality",
        "type": "object"
      },
      "maxItems": 20,
      "minItems": 1,
      "title": "Population Forecast Municipalities List",
      "type": "array"
    }
  },
  "required": [
    "language",
    "lookup",
    "name",
    "payload"
  ],
  "title": "Population Forecast",
  "type": "object"
}
